{"version":3,"sources":["services/directory.js","App.jsx","index.jsx"],"names":["baseUrl","directoryService","getAll","axios","get","create","newObject","post","update","id","put","remove","delete","formatElementId","string","replace","toLowerCase","Input","value","setter","type","onChange","e","target","Listing","person","removePerson","name","number","onClick","Directory","personsDisplay","map","NewPersonForm","newName","setNewName","newNumber","setNewNumber","addPerson","nameLabel","nameId","numberId","className","onSubmit","htmlFor","MessageBox","message","data-state","text","SearchField","searchTerm","setSearchTerm","searchFieldId","App","useState","persons","setPersons","setMessage","sendMessage","duration","newMessage","setTimeout","useEffect","then","response","data","catch","error","filter","includes","event","preventDefault","overwritePerson","find","window","confirm","newPersonObject","newPersons","p","push","alert","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0a863d01.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/directory\";\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject);\n};\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst directoryService = {\n  getAll: getAll,\n  create: create,\n  update: update,\n  remove: remove,\n};\n\nexport default directoryService;\n","import React, { useState, useEffect } from \"react\";\nimport directoryService from \"./services/directory\";\nimport \"./app.css\";\n\n// Utility Functions\n// const newId = () => Math.floor(Math.random() * 100000);\nconst formatElementId = (string) => string.replace(/[\\W]/g, \"\").toLowerCase();\n\n// Components\n\nconst Input = ({ value, setter, type = \"text\", id = null }) => {\n  const handleChange = (e) => {\n    setter(e.target.value);\n  };\n  return <input type={type} id={id} value={value} onChange={handleChange} />;\n};\n\nconst Listing = ({ person, removePerson }) => (\n  <tr>\n    <td>{person.name}</td>\n    <td>{person.number}</td>\n    <td>\n      <button\n        onClick={() => {\n          removePerson(person);\n        }}\n      >\n        delete\n      </button>\n    </td>\n  </tr>\n);\n\nconst Directory = ({ personsDisplay, removePerson }) => {\n  return (\n    <table>\n      <tbody>\n        {personsDisplay.map((person) => (\n          <Listing key={person.id} person={person} removePerson={removePerson} />\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nconst NewPersonForm = ({ newName, setNewName, newNumber, setNewNumber, addPerson }) => {\n  const nameLabel = \"Name: \";\n  const nameId = \"input-\" + formatElementId(nameLabel);\n  const numberLabel = \"Number: \";\n  const numberId = \"input-\" + formatElementId(numberLabel);\n  return (\n    <form className=\"newPersonForm\" onSubmit={addPerson}>\n      <div>\n        <label htmlFor={nameId}>{nameLabel}</label>\n        <Input value={newName} setter={setNewName} id={nameId} />\n      </div>\n      <div>\n        <label htmlFor={numberId}>Number:</label>\n        <Input value={newNumber} setter={setNewNumber} id={numberId} />\n      </div>\n      <button type=\"submit\">add</button>\n    </form>\n  );\n};\n\nconst MessageBox = ({ message }) => {\n  return (\n    <div className=\"message\" data-state={message.type}>\n      {message.text}\n    </div>\n  );\n};\n\nconst SearchField = ({ searchTerm, setSearchTerm }) => {\n  const searchFieldLabel = \"Filter:\";\n  const searchFieldId = \"input-searchfield\";\n  return (\n    <div className=\"searchField\">\n      <label htmlFor={searchFieldId}>{searchFieldLabel}</label>\n      <Input value={searchTerm} setter={setSearchTerm} id={searchFieldId} />\n    </div>\n  );\n};\n\n// App\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [message, setMessage] = useState(null);\n\n  const sendMessage = (text, type = \"ok\", duration = 5000) => {\n    const newMessage = { text, type };\n    setMessage(newMessage);\n    setTimeout(() => {\n      setMessage(null);\n    }, duration);\n  };\n\n  useEffect(() => {\n    directoryService\n      .getAll()\n      .then((response) => {\n        setPersons(response.data);\n      })\n      .catch((error) => {\n        sendMessage(\"error communicating with server\", \"error\");\n      });\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const overwritePerson = persons.find((person) => person.name === newName);\n    if (overwritePerson) {\n      if (overwritePerson.number === newNumber) {\n        sendMessage(`${newName} already in directory`, \"error\");\n        return;\n      }\n      if (window.confirm(`${newName} already in directory, update number?`)) {\n        const newPersonObject = { ...overwritePerson, number: newNumber };\n        directoryService\n          .update(newPersonObject.id, newPersonObject)\n          .then((response) => {\n            const newPersons = persons.filter((p) => p.id !== response.data.id);\n            newPersons.push(response.data);\n            setPersons(newPersons);\n            setNewName(\"\");\n            setNewNumber(\"\");\n            sendMessage(`${response.data.name} added to directory`);\n          })\n          .catch((error) => {\n            sendMessage(\"error updating database\", \"error\");\n          });\n        return;\n      }\n      return;\n    }\n\n    const newPersonObject = {\n      // id: newId(),\n      name: newName,\n      number: newNumber,\n    };\n\n    directoryService\n      .create(newPersonObject)\n      .then((response) => {\n        const newPersons = [...persons, response.data];\n        setPersons(newPersons);\n        setNewName(\"\");\n        setNewNumber(\"\");\n        sendMessage(`${response.data.name} added to directory`);\n      })\n      .catch((error) => {\n        sendMessage(error.response.data.error, \"error\", 10000);\n      });\n  };\n\n  const removePerson = (person) => {\n    directoryService\n      .remove(person.id)\n      .then((response) => {\n        const newPersons = persons.filter((p) => p.id !== person.id);\n        setPersons(newPersons);\n        sendMessage(`${person.name} removed from directory`);\n      })\n      .catch((error) => {\n        alert(`error deleting ${person.name}`);\n      });\n  };\n\n  const personsDisplay = persons.filter((person) =>\n    person.name.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"app flow\">\n      <h1>Phonebook</h1>\n      {message && <MessageBox message={message} />}\n      <div className=\"addPerson flow\">\n        <h2>Add Person</h2>\n        <NewPersonForm\n          newName={newName}\n          setNewName={setNewName}\n          newNumber={newNumber}\n          setNewNumber={setNewNumber}\n          addPerson={addPerson}\n        />\n      </div>\n      <div className=\"directory flow\">\n        <h2>Directory</h2>\n        <SearchField searchTerm={searchTerm} setSearchTerm={setSearchTerm} />\n        <Directory personsDisplay={personsDisplay} removePerson={removePerson} />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}