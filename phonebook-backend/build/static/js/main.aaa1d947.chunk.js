(this["webpackJsonpanecdotes-app"]=this["webpackJsonpanecdotes-app"]||[]).push([[0],{41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(17),o=n.n(a),i=n(18),s=n(8),d=n(3),u=n(5),j=n.n(u),l="/api/directory",b={getAll:function(){return j.a.get(l)},create:function(e){return j.a.post(l,e)},update:function(e,t){return j.a.put("".concat(l,"/").concat(e),t)},remove:function(e){return j.a.delete("".concat(l,"/").concat(e))}},m=(n(41),n(0)),h=function(e){return e.replace(/[\W]/g,"").toLowerCase()},f=function(e){var t=e.value,n=e.setter,r=e.type,c=void 0===r?"text":r,a=e.id,o=void 0===a?null:a;return Object(m.jsx)("input",{type:c,id:o,value:t,onChange:function(e){n(e.target.value)}})},O=function(e){var t=e.person,n=e.removePerson;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:t.number}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{onClick:function(){n(t)},children:"delete"})})]})},v=function(e){var t=e.personsDisplay,n=e.removePerson;return Object(m.jsx)("table",{children:Object(m.jsx)("tbody",{children:t.map((function(e){return Object(m.jsx)(O,{person:e,removePerson:n},e.id)}))})})},p=function(e){var t=e.newName,n=e.setNewName,r=e.newNumber,c=e.setNewNumber,a=e.addPerson,o="Name: ",i="input-"+h(o),s="input-"+h("Number: ");return Object(m.jsxs)("form",{className:"newPersonForm",onSubmit:a,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:i,children:o}),Object(m.jsx)(f,{value:t,setter:n,id:i})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:s,children:"Number:"}),Object(m.jsx)(f,{value:r,setter:c,id:s})]}),Object(m.jsx)("button",{type:"submit",children:"add"})]})},x=function(e){var t=e.message;return Object(m.jsx)("div",{className:"message","data-state":t.type,children:t.text})},N=function(e){var t=e.searchTerm,n=e.setSearchTerm,r="input-searchfield";return Object(m.jsxs)("div",{className:"searchField",children:[Object(m.jsx)("label",{htmlFor:r,children:"Filter:"}),Object(m.jsx)(f,{value:t,setter:n,id:r})]})},w=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(d.a)(a,2),u=o[0],j=o[1],l=Object(r.useState)(""),h=Object(d.a)(l,2),f=h[0],O=h[1],w=Object(r.useState)(""),y=Object(d.a)(w,2),g=y[0],P=y[1],S=Object(r.useState)(null),F=Object(d.a)(S,2),k=F[0],C=F[1],T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ok",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,r={text:e,type:t};C(r),setTimeout((function(){C(null)}),n)};Object(r.useEffect)((function(){b.getAll().then((function(e){c(e.data)})).catch((function(e){T("error communicating with server","error")}))}),[]);var D=n.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())}));return Object(m.jsxs)("div",{className:"app flow",children:[Object(m.jsx)("h1",{children:"Phonebook"}),k&&Object(m.jsx)(x,{message:k}),Object(m.jsxs)("div",{className:"addPerson flow",children:[Object(m.jsx)("h2",{children:"Add Person"}),Object(m.jsx)(p,{newName:f,setNewName:O,newNumber:g,setNewNumber:P,addPerson:function(e){e.preventDefault();var t=n.find((function(e){return e.name===f}));if(t){if(t.number===g)return void T("".concat(f," already in directory"),"error");if(window.confirm("".concat(f," already in directory, update number?"))){var r=Object(s.a)(Object(s.a)({},t),{},{number:g});return void b.update(r.id,r).then((function(e){var t=n.filter((function(t){return t.id!==e.data.id}));t.push(e.data),c(t),O(""),P(""),T("".concat(e.data.name," added to directory"))})).catch((function(e){T("error updating database","error")}))}}else{var a={name:f,number:g};b.create(a).then((function(e){var t=[].concat(Object(i.a)(n),[e.data]);c(t),O(""),P(""),T("".concat(e.data.name," added to directory"))})).catch((function(e){T(e.response.data.error,"error",1e4)}))}}})]}),Object(m.jsxs)("div",{className:"directory flow",children:[Object(m.jsx)("h2",{children:"Directory"}),Object(m.jsx)(N,{searchTerm:u,setSearchTerm:j}),Object(m.jsx)(v,{personsDisplay:D,removePerson:function(e){b.remove(e.id).then((function(t){var r=n.filter((function(t){return t.id!==e.id}));c(r),T("".concat(e.name," removed from directory"))})).catch((function(t){alert("error deleting ".concat(e.name))}))}})]})]})};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.aaa1d947.chunk.js.map